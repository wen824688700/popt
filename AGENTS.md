# Repository Guidelines

## Project Structure & Module Organization

- `frontend/`: Next.js (App Router) + React + TypeScript UI.
  - `frontend/app/`: routes and pages
  - `frontend/components/`: shared UI components
  - `frontend/lib/`: client utilities and state
  - `frontend/public/`: static assets
- `backend/`: FastAPI service.
  - `backend/app/api/`: API routes
  - `backend/app/services/`: business logic
  - `backend/app/models/`: data models
  - `backend/tests/`: `unit/` and `property/` tests
- `.github/workflows/`: CI for frontend/backend. `.kiro/` contains product specs; `skills-main/` holds prompt-framework references.

## Build, Test, and Development Commands

Frontend (from `frontend/`):
- `npm ci`: install dependencies (CI-consistent)
- `npm run dev`: start local dev server
- `npm run lint`: ESLint (Next.js rules)
- `npm run type-check`: `tsc --noEmit`
- `npm test`: Jest unit tests
- `npm run build`: production build

Backend (from `backend/`):
- `python -m venv venv` + `venv\\Scripts\\activate`: create/activate venv (Windows)
- `pip install -r requirements.txt`: install dependencies
- `uvicorn app.main:app --reload`: run API locally
- `ruff check .`: lint (matches CI)
- `mypy app/`: type-check (matches CI)
- `pytest`: run all tests (adds coverage via `pytest.ini`)

## Coding Style & Naming Conventions

- TypeScript: keep `strict` mode passing; components in `PascalCase.tsx`, hooks as `useXyz`.
- Styling: use Tailwind; prefer `clsx` + `tailwind-merge` for conditional classes.
- Python: follow Ruff (`line-length = 100`, `py311`) and keep full type hints (Mypy uses `disallow_untyped_defs = true`).
- Tests (backend): file names `test_*.py`, classes `Test*`, functions `test_*` (see `backend/pytest.ini`).

## Testing Guidelines

- Backend: `pytest` + `pytest-asyncio` + `hypothesis`; coverage is collected for `app/` and an HTML report is generated by default.
- Frontend: Jest is configured for `jsdom` via `frontend/jest.config.js`; add tests as `*.test.ts(x)` near the code under `app/`, `components/`, or `lib/`.

## Commit & Pull Request Guidelines

- Commits: history mixes Chinese summaries and conventional prefixes (e.g., `feat:`, `Refactor:`). Prefer a consistent pattern like `feat(frontend): …`, `fix(backend): …`, `refactor: …`, `docs: …`.
- PRs: include a short summary, scope (`frontend/` or `backend/`), and screenshots for UI changes. Mention any `.env` keys added/changed and ensure CI (lint/type-check/tests/build) passes.

## Security & Configuration Tips

- Start from `frontend/.env.example` and `backend/.env.example`; keep secrets out of git.
- Use `frontend/.env.local` for local-only frontend config and `backend/.env` for backend overrides.
